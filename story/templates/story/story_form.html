{% extends "base.html" %}
{% load static i18n %}
{% load crispy_forms_tags %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col">
            <form method="post">
            
            {% csrf_token %}
                {{form.media}}
            {{form|crispy}}
            <button class="btn btn-outline-danger" type="submit">{% trans "Save" %}</button>
            </form>
        </div>
    </div>
</div>
<span id="startLat">startLat</p><span id="startLon">startLon</p>
{% endblock %}

{% block extrajs %}
{{ form.media }}
<script>
window.onload = function() {
  var startPos;
  var geoOptions = {
    enableHighAccuracy: true
  }

  var geoSuccess = function(position) {
    startPos = position;
    document.getElementById('startLat').innerHTML = startPos.coords.latitude;
    document.getElementById('startLon').innerHTML = startPos.coords.longitude;
    document.getElementById("id_coordinate").value = = startPos.coords;
  };
  var geoError = function(error) {
    console.log('Error occurred. Error code: ' + error.code);
    // error.code can be:
    //   0: unknown error
    //   1: permission denied
    //   2: position unavailable (error response from location provider)
    //   3: timed out
  };

  navigator.geolocation.getCurrentPosition(geoSuccess, geoError, geoOptions);
};

</script>
{% endblock extrajs %}